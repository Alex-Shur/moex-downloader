# MOEX Downloader

Приложение для загрузки данных свечей (candles) с Московской биржи (MOEX) с использованием графического интерфейса PyQt6.

## Требования

- Python 3.12 или выше
- UV (менеджер пакетов Python)

## Установка и запуск

### 1. Установка UV

UV — это современный и быстрый менеджер пакетов Python. Установите его одним из способов:

#### На Windows (PowerShell):
```powershell
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

#### На macOS/Linux:
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

Или через pip (если UV уже установлен):
```bash
pip install uv
```

Проверьте установку:
```powershell
uv --version
```

### 2. Навигация в проект и запуск приложения

```powershell
cd c:\WORK\_Trading\xx_libs\moex_downloader
uv run moex_downloader.py
```

UV автоматически создаст виртуальное окружение и установит все зависимости из `pyproject.toml`:
- `httpx-moex` — для работы с API MOEX
- `pandas` — для работы с данными
- `pyqt6` — для графического интерфейса
- `qasync` — для асинхронного программирования в PyQt6

## Использование приложения

1. **"Обновить список"** — обновляет данные для выбранного тикера
2. **Сохранить** — сохраняет конфигурацию таблицы в CSV файл
3. **Загрузить** — загружает данные свечей (candles) для выбранных инструментов

Приложение поддерживает два типа инструментов:
- **Stocks** (акции)
- **Futures** (фьючерсы)

## Структура проекта

```
moex_downloader/
├── moex_downloader.py      # Основной файл приложения
├── pyproject.toml          # Конфигурация проекта и зависимости
├── README.md               # Этот файл
├── stocks_config.csv       # Конфигурация акций (создаётся при запуске)
├── futures_config.csv      # Конфигурация фьючерсов (создаётся при запуске)
└── DATA/                   # Директория для сохранения данных
```

## Решение проблем

### ModuleNotFoundError: No module named 'httpx_moex'

Убедитесь, что вы запустили `uv sync` в директории проекта.

### Окружение не активируется

Если вы используете PowerShell и получаете ошибку выполнения скриптов, выполните:
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### UV не найден

Убедитесь, что UV установлен и добавлен в PATH, переустановите если необходимо.

## Зависимости

Все зависимости автоматически устанавливаются при запуске `uv sync`. Список зависимостей:

- **httpx-moex** (>=0.1.0) — API клиент для MOEX
- **pandas** (>=2.0.0) — обработка данных
- **pyqt6** (>=6.8.0) — графический интерфейс
- **qasync** (>=0.27.0) — асинхронное программирование для PyQt6
